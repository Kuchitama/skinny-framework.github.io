---
title: Scaffolding - Skinny Framework
---

## Scaffolding

<hr/>
### Scaffold Generator
<hr/>

Skinny has a powerful scaffold generator. Usage is very simple.

<p class="alert alert-warning">
<b>WARNING:</b> If you're going try with "users", use "accounts" or "members" instead. 
<br/>
"users" also exists in H2 information_schema. This may become a pitfall if you aren't conscious.
</p>

```
./skinny g scaffold members member name:String "nickname:String:varchar(64)" birthday:Option[LocalDate]
./skinny db:migrate
./skinny run
```

Now you can use CRUD pages for members resource at `http://localhost:8080/members`.

<hr/>
#### Parameters

Scaffold command's parameters are ...

```
./skinny g scaffold:{template} {resources} {resource} "{fieldName:paramType(:columnType)}" ...
```

- {template}: "ssp" / "scaml" / "jade" (Scalate template name)
- {resources}: Resource name in the plural (camelCase)
- {resource}: Resource name (camelCase)
- {fieldName}: Field name in the resource (camelCase)
- {paramType}: `skinny.ParamType`. see also: [skinny/ParamType.scala](https://github.com/skinny-framework/skinny-framework/blob/develop/common/src/main/scala/skinny/ParamType.scala)
- {columnType}: (optional) Database column type. This will be embedded into DB migration file.

It's also possible to specify namespace for the resource:

```
./skinny g scaffold:{template} {namespace} {resources} {resource} {attributes}...
```

- {namespace}: prefix for the resource (e.g. admin.foo.bar)


<hr/>
#### Example Usage
<hr/>

Let's create CRUD pages to manage project members!

<hr/>

```
$ ./skinny g scaffold:jade projectMembers projectMember name:String "nickname:Option[String]:varchar(32)" joinedAt:DateTime leaveAt:Option[DateTime]

[info] Running TaskRunner generate:scaffold:jade projectMembers projectMember name:String nickname:Option[String]:varchar(32) joinedAt:DateTime leaveAt:Option[DateTime]

 *** Skinny Generator Task ***

  "src/main/scala/controller/ApplicationController.scala" skipped.
  "src/main/scala/controller/ProjectMembersController.scala" created.
  "src/main/scala/controller/Controllers.scala" modified.
  "src/test/scala/controller/ProjectMembersControllerSpec.scala" created.
  "src/test/scala/integrationtest/ProjectMembersController_IntegrationTestSpec.scala" created.
  "src/test/resources/factories.conf" modified.
  "src/main/scala/model/ProjectMember.scala" created.
  "src/test/scala/model/ProjectMemberSpec.scala" created.
  "src/main/webapp/WEB-INF/views/projectMembers/_form.html.jade" created.
  "src/main/webapp/WEB-INF/views/projectMembers/new.html.jade" created.
  "src/main/webapp/WEB-INF/views/projectMembers/edit.html.jade" created.
  "src/main/webapp/WEB-INF/views/projectMembers/index.html.jade" created.
  "src/main/webapp/WEB-INF/views/projectMembers/show.html.jade" created.
  "src/main/resources/messages.conf" modified.
  "src/main/resources/db/migration/V20140324003741__Create_projectMembers_table.sql" created.

[success] Total time: 1 s, completed Mar 2, 2014 12:58:53 AM
```

With namespace:

```
$ ./skinny g scaffold:jade admin.foo members member name:String

[info] Running TaskRunner generate:scaffold:jade admin.foo members member name:String

 *** Skinny Generator Task ***

  "src/main/scala/controller/ApplicationController.scala" skipped.
  "src/main/scala/controller/admin/foo/MembersController.scala" created.
  "src/main/scala/controller/Controllers.scala" modified.
  "src/test/scala/controller/admin/foo/MembersControllerSpec.scala" created.
  "src/test/scala/integrationtest/admin/foo/MembersController_IntegrationTestSpec.scala" created.
  "src/test/resources/factories.conf" modified.
  "src/main/scala/model/admin/foo/Member.scala" created.
  "src/test/scala/model/admin/foo/MemberSpec.scala" created.
  "src/main/webapp/WEB-INF/views/admin/foo/members/_form.html.jade" created.
  "src/main/webapp/WEB-INF/views/admin/foo/members/new.html.jade" created.
  "src/main/webapp/WEB-INF/views/admin/foo/members/edit.html.jade" created.
  "src/main/webapp/WEB-INF/views/admin/foo/members/index.html.jade" created.
  "src/main/webapp/WEB-INF/views/admin/foo/members/show.html.jade" created.
  "src/main/resources/messages.conf" modified.
  "src/main/resources/db/migration/V20140324003819__Create_members_table.sql" created.

[success] Total time: 2 s, completed Mar 7, 2014 12:36:17 AM
```


<hr/>
After that, do DB migration.
<hr/>

```
$ ./skinny db:migrate
```

<hr/>
Run the Skinny app and access `http://localhost:8080/project_members` from your browser.
<hr/>

```
$ ./skinny run
```

<hr/>
#### URL / Parameter Names
<hr/>

The following is an example controller generated by scaffold command.

Be aware of these rules:

- Base URL will be snake_cased. If you'd like to change it, edit `resourcesBasePath`
- Parameter names will be snake_cased. `useSnakeCasedParamKeys` should be true when using `Params#withDateTime`

It'll be the fastest way to understand actual files generated by scaffold generator.

<hr/>

```java
package controller

import skinny._
import skinny.validator._
import model.ProjectMember

object ProjectMembersController extends SkinnyResource with ApplicationController {
  protectFromForgery()

  override def model = ProjectMember
  override def resourcesName = "projectMembers"
  override def resourceName = "projectMember"

  override def resourcesBasePath = s"/${toSnakeCase(resourcesName)}"
  override def useSnakeCasedParamKeys = true

  override def createParams = Params(params).withDateTime("joined_at").withDateTime("leave_at")
  override def createForm = validation(createParams,
    paramKey("name") is required & maxLength(512),
    paramKey("nickname") is maxLength(512),
    paramKey("joined_at") is required & dateTimeFormat,
    paramKey("leave_at") is dateTimeFormat
  )
  override def createFormStrongParameters = Seq(
    "name" -> ParamType.String,
    "nickname" -> ParamType.String,
    "joined_at" -> ParamType.DateTime,
    "leave_at" -> ParamType.DateTime
  )

...
```

<hr/>
### Reverse Scaffold Generator
<hr/>

If you're working with existing database, `reverse-scaffold` command is pretty useful.

When you have `project_members` table in database,

```sql
-- For H2 Database
create table project_members (
  member_id bigserial not null primary key,
  name varchar(512) not null,
  nickname varchar(32),
  joined_at timestamp not null,
  leave_at timestamp
);
```

Run the `reverse-scaffold` command like this.

This command uses DB settings in the `src/main/resources/application.conf`. SkinnyEnv is set as `development`. 

```
$ ./skinny g reverse-scaffold:scaml project_members projectMembers projectMember

[info] Running TaskRunner generate:reverse-scaffold:scaml project_members projectMembers projectMember

 *** Skinny Reverse Engineering Task ***

  Table     : project_members
  ID        : memberId
  Resources : projectMembers
  Resource  : projectMember

  Columns:
   - name:String:varchar(512)
   - nickname:Option[String]:varchar(32)
   - joinedAt:DateTime
   - leaveAt:Option[DateTime]

 *** Skinny Generator Task ***

  "src/main/scala/controller/ApplicationController.scala" skipped.
  "src/main/scala/controller/ProjectMembersController.scala" created.
  "src/main/scala/controller/Controllers.scala" modified.
  "src/test/scala/controller/ProjectMembersControllerSpec.scala" created.
  "src/test/scala/integrationtest/ProjectMembersController_IntegrationTestSpec.scala" created.
  "src/test/resources/factories.conf" modified.
  "src/main/scala/model/ProjectMember.scala" created.
  "src/test/scala/model/ProjectMemberSpec.scala" created.
  "src/main/webapp/WEB-INF/views/projectMembers/_form.html.scaml" created.
  "src/main/webapp/WEB-INF/views/projectMembers/new.html.scaml" created.
  "src/main/webapp/WEB-INF/views/projectMembers/edit.html.scaml" created.
  "src/main/webapp/WEB-INF/views/projectMembers/index.html.scaml" created.
  "src/main/webapp/WEB-INF/views/projectMembers/show.html.scaml" created.
  "src/main/resources/messages.conf" modified.
  "src/main/resources/db/migration/V20140302010916__Create_projectMembers_table.sql" created.

[success] Total time: 1 s, completed Mar 2, 2014 1:09:16 AM
```

The DB migration file generated by this command is commented out by default, so `./skinny db:migrate` will do nothing.

Just run `./skinny run` and access `http://localhost:8080/project_members` from your browser.

<hr/>
#### Parameters

Scaffold command's parameters are ...

```
./skinny g reverse-scaffold:{template} {tableName} {resources} {resource}
```

- {template}: "ssp" / "scaml" / "jade" (Scalate template name)
- {tableName}: Target table name in the existing database
- {resources}: Resource name in the plural (camelCase)
- {resource}: Resource name (camelCase)

```
./skinny g reverse-scaffold:{template} {namespace} {tableName} {resources} {resource}
```

- {namespace}: prefix for the resource (e.g. admin.foo.bar)



